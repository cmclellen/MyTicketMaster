@page "/authentication/logout"

@using Microsoft.AspNetCore.Authentication

@inject NavigationManager NavManager

<PageTitle>Signing out...</PageTitle>

@if (LogoutModel != null)
{
    <EditForm method="post" OnSubmit="LogoutClicked" Model="LogoutModel" FormName="LogoutModel" name="LogoutModel">
        
    </EditForm>

    <script>
        window.onload = function () {
            document.forms['LogoutModel'].submit();
        }
    </script>
}

@code {
    [CascadingParameter]
    public HttpContext? HttpContext { get; set; }

    public string LogoutModel { get; set; } = string.Empty; // This is just a dummy model

    async Task LogoutClicked()
    {
        await HttpContext!.SignOutAsync();
        // NavManager.NavigateTo("/authentication/login");
    }
}